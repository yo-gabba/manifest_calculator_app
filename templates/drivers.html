{% extends "base.html" %}
{% block content %}
<h2>Driver Information</h2>

<!-- Select Driver -->
<form method="POST" action="{{ url_for('drivers') }}">
    <label for="driver">Select Driver:</label>
    <select name="driver" id="driver" onchange="this.form.submit()">
        <option value="">--Select--</option>
        {% for driver in drivers %}
            <option value="{{ driver.id }}" {% if driver.id == selected_driver_id|int %}selected{% endif %}>
                {{ driver.name }}
            </option>
        {% endfor %}
    </select>
</form>

{% if selected_driver_id %}
    <!-- Display Totals -->
    <div id="driverTotals" style="margin-top:20px;">
        <p>Daily Total Miles: {{ totals.day_miles }}</p>
        <p>Weekly Total Miles: {{ totals.week_miles }}</p>
        <p>Daily Payback: ${{ totals.day_payback }}</p>
        <p>Weekly Payback: ${{ totals.week_payback }}</p>
    </div>

    <!-- Add Manifest Form -->
    <h3>Add Manifest</h3>
    <form method="POST" action="{{ url_for('drivers') }}">
        <input type="hidden" name="driver" value="{{ selected_driver_id }}">
        
        <label for="date">Date:</label>
        <input type="date" name="date" required><br>

        <label for="start_odometer">Starting Odometer:</label>
        <input type="number" step="0.1" name="start_odometer" required><br>

        <label for="end_odometer">Ending Odometer:</label>
        <input type="number" step="0.1" name="end_odometer" required><br>

        <label for="weekly_rate">Weekly Rate ($/mile):</label>
        <input type="number" step="0.01" name="weekly_rate" required><br>

        <label for="payback_percentage">Payback % (0-1):</label>
        <input type="number" step="0.01" name="payback_percentage" required><br>

        <button type="submit">Add Manifest</button>
    </form>
{% endif %}
{% endblock %}
